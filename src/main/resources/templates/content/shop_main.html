<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base_layout}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<th:block layout:fragment="css">
	<link rel="stylesheet" href="/css/shop_main.css">
</th:block>

<div layout:fragment="content" class="mb-5">
	<style>
	
	#itemDiv {
		border-radius: 30px;
		margin: 0 auto;
		box-shadow: 0px 0px 5px 3px #EDEDED;
	}
	
	.image-box {
	    width:100%;
	    height:220px;
	    overflow:hidden;
	    margin:0 auto;
	}
	
	.image-thumbnail {
	    width:100%;
	    height:100%;
	    object-fit:cover;
	}
	
	div p{
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
	}
	
	
	</style>


	<div class="col">
		<div class="row d-flex justify-content-start">
		<!-- 카테고리 목록 -->
			<div class="dropdown" id="dropdownMenu" style="width: 65px;">
				<button class="dropdown-button">
					<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
					</svg>
				</button>
				<div class="dropdown-content">
					<div id="menu2">
						<ul class="M01" th:if="${#lists.size(mainCateList)}==0">
							<li>
								<a style="text-align: center;">등록안됨</a>
							</li>
						</ul>
						
						<ul class="M01" th:each="mainCate:${mainCateList}" th:unless="${#lists.size(mainCateList)}==0">
							<li>
								<a th:href="@{/item/list(mainCode=${mainCate.mainCateCode})}">[[${mainCate.mainCateName}]]</a>
								<ul class="M02">
									<li th:each="subCate:${subCateList}" th:if="${subCate.mainCateCode==mainCate.mainCateCode}">
										<a href="#">[[${subCate.subCateName}]]</a>
										<ul class="M03">
											<li th:each="detailCate:${detailCateList}" th:if="${detailCate.subCateCode==subCate.subCateCode}">
												<a href="#">[[${detailCate.detailCateName}]]</a>
											</li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
		
		
	</div>
		<div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel" style="width: 100%; height: 200px;">
			<div class="carousel-indicators">
				<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
				<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
				<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
			</div>
			<div class="carousel-inner">
				<div class="carousel-item active" data-bs-interval="10000">
					<img src="/images/slide01.jpg" class="d-block w-100" alt="..." height="200px;">
					<div class="carousel-caption d-none d-md-block">
						<h5>First slide label</h5>
					</div>
				</div>
				<div class="carousel-item" data-bs-interval="2000">
					<img src="/images/slide02.jpg" class="d-block w-100" alt="..." height="200px;">
					<div class="carousel-caption d-none d-md-block">
						<h5>Second slide label</h5>
					</div>
				</div>
				<div class="carousel-item">
					<img src="/images/slide03.jpg" class="d-block w-100" alt="..." height="200px;">
					<div class="carousel-caption d-none d-md-block">
						<h5>Third slide label</h5>
					</div>
				</div>
			</div>
			<button class="carousel-control-prev" type="button"data-bs-target="#carouselExampleDark" data-bs-slide="prev" style="z-index: 0;">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button"	data-bs-target="#carouselExampleDark" data-bs-slide="next" style="z-index: 0;">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>
		
	</div>
	
	<!-- 최근 본 상품리모컨 -->
	<div class="banner">
		<div class="border like_it text-center">
			<div class="col">찜</div>
			<div class="col">[[${wishAmount}]]</div>
		</div>
		<div class="border clickItem">
			<div class="text-center">최근본상품</div>
			<div th:each="cookieImg:${cookie_imgName}">
				<img alt="..." th:src="|@{/images/}${cookieImg}|" width="100%;">
			</div>
		</div>
	</div>
	
	<div class="row">인기 상품목록</div>
	
	<div class="col-12">
		<div class="row text-center">
			<div class="col-3" th:each="item : ${itemList}">
				<div class="card mb-3" th:onclick="|location.href='@{/item/itemDetail(itemCode=${item.itemCode},cookieChk=${cookiechk})}'|">
					<div class="image-box">
						<img th:src="|@{/images/}${item.imgList[0].attachedName}|" class="card-img-top image-thumbnail" alt="...">
					</div>
					<div class="card-body">
						<div><p>[[${item.itemName}]]</p></div>
						<div th:text="${#numbers.formatCurrency(item.itemPrice)}"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="text-center">
		<th:block th:if="${itemVO.prev}">
	   		<a th:text="prev" th:href="@{/item/list(nowPage=${itemVO.beginPage}-1)}"></a>
	   	</th:block>
	   	
	   	<th:block th:each="pageNum : ${#numbers.sequence(itemVO.beginPage, itemVO.endPage)}">
	   		<a th:text="${pageNum}" th:href="@{/item/list(nowPage=${pageNum})}"></a> 	
	   	</th:block>
	   	
	   	<th:block th:if="${itemVO.next}">
	   		<a th:text="next" th:href="@{/item/list(nowPage=${itemVO.endPage}+1)}"></a>
	   	</th:block>
	</div>



	<script type="text/javascript" th:src="@{/js/shop_main.js}"></script>
</div>
</html>