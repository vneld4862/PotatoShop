<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base_layout}"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<th:block layout:fragment="css">
	<link rel="stylesheet" href="/css/shop_main.css">
</th:block>

<div layout:fragment="content" class="mb-5">
	<div class="col">

		<div class="row d-flex justify-content-start">
		<!-- 카테고리 목록 -->
			<div class="dropdown" id="dropdownMenu" style="width: 65px;">
				<button class="dropdown-button" style="color: green;">
					<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
						<path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
					</svg>
				</button>
				<div class="dropdown-content">
					<div id="menu2" style="font-size: 20px;">
						<ul class="M01" th:if="${#lists.size(mainCateList)}==0">
							<li>
								<a style="text-align: center;">등록된 카테고리가 없습니다.</a>
							</li>
						</ul>
						
						<ul class="M01" th:each="mainCate:${mainCateList}" th:unless="${#lists.size(mainCateList)}==0">
							<li>
								<a th:href="@{/item/list(mainCode=${mainCate.mainCateCode})}">[[${mainCate.mainCateName}]]</a>
								<ul class="M02">
									<li th:each="subCate:${subCateList}" th:if="${subCate.mainCateCode==mainCate.mainCateCode}">
										<a th:href="@{/item/list(subCode=${subCate.subCateCode})}">[[${subCate.subCateName}]]</a>
										<ul class="M03">
											<li th:each="detailCate:${detailCateList}" th:if="${detailCate.subCateCode==subCate.subCateCode}">
												<a th:href="@{/item/list(detailCode=${detailCate.detailCateCode})}">[[${detailCate.detailCateName}]]</a>
											</li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</div>
				
		
			</div>
			<div id="carouselExampleDark" class="carousel carousel-white slide" data-bs-ride="carousel" style="width: 100%; height: 200px;">
				<div class="carousel-indicators">
					<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
					<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
					<button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
				</div>
				<div class="carousel-inner">
					<div class="carousel-item active" data-bs-interval="10000">
						<img src="https://media.bunjang.co.kr/images/nocrop/919673566_w2058.jpg" class="d-block w-100" alt="..." height="200px;">
						<div class="carousel-caption d-none d-md-block">
						</div>
					</div>
					<div class="carousel-item" data-bs-interval="2000">
						<img src="https://media.bunjang.co.kr/images/nocrop/919158390_w2058.jpg" class="d-block w-100" alt="..." height="200px;">
						<div class="carousel-caption d-none d-md-block">
						</div>
					</div>
					<div class="carousel-item">
						<img src="https://media.bunjang.co.kr/images/nocrop/907207228_w2058.jpg" class="d-block w-100" alt="..." height="200px;">
						<div class="carousel-caption d-none d-md-block">
						</div>
					</div>
				</div>
				<button class="carousel-control-prev" type="button"data-bs-target="#carouselExampleDark" data-bs-slide="prev" style="z-index: 0;">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="visually-hidden">Previous</span>
				</button>
				<button class="carousel-control-next" type="button"	data-bs-target="#carouselExampleDark" data-bs-slide="next" style="z-index: 0;">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="visually-hidden">Next</span>
				</button>
			</div>
			
		</div>
		
		<!-- 최근 본 상품리모컨 -->
		<div class="banner">
			<div class="border like_it text-center" style="position: static;">
				<div class="col">찜</div>
				<div class="col" style="position: relative;top: 22px;">
					[[${wishAmount}]]
				</div>
				<div class="col" th:if="${#lists.isEmpty(wishAmount)}" style="position: relative;top: 22px;">&nbsp;</div>
				<div class="col">
					<a onclick="location.href='/manage/myMarket?wishChk='+'toWish';">
						<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-bag-heart-fill" viewBox="0 0 16 16" style="position: relative;bottom: 25px;z-index: 4;cursor: pointer;">
							<path d="M11.5 4v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5ZM8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1Zm0 6.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"/>
						</svg>
					</a>
				</div>
			</div>
			<div class="border clickItem" style="overflow-y: scroll;overflow-x: hidden;">
				<div class="text-center">
					<img alt="..." src="https://www.bodybogam.com/design/bodybogam/mobile_citybrown/bt_icon04.gif" width="100%">
				</div>
				<div>
					<th:block th:each="cookieImg:${cookie_imgName}">
						<img th:onclick="|location.href='@{/item/itemDetail(itemCode=${cookieImg.itemCode})}'|" class="border-bottom border-top mb-3" alt="..." th:src="|@{/images/}${cookieImg.attachedName}|" width="100%;" style="min-height: 110px;min-width: 100%;cursor: pointer;">
					</th:block>
					
					<div class="row justify-content-center" th:if="${#lists.isEmpty(cookie_imgName)}">
						<img alt="..." src="https://cdn-icons-png.flaticon.com/512/38/38488.png" width="80%">
						<div style="font-size: .8rem;">상품이 없습니다.</div>
					</div>
				</div>
			</div>
		</div>
		<!-- 매출 금액이 적은 카테고리는 기타로 묶음 처리 -->
		<div class="accordion" id="accordionExample">
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingTwo">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" onclick="mainChart();">
						판매현황 보기
					</button>
				</h2>
				<div id="collapseTwo" class="accordion-collapse collapse"
					aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
					<div class="accordion-body" id="chart" style="height: 400px;">
					</div>
				</div>
			</div>
		</div>
		
		<div class="container col-12" style="margin-top: 5rem;margin-bottom: 1.5rem;">
			<h4 style="color: green;">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-box2-heart" viewBox="0 0 16 16">
				  <path d="M8 7.982C9.664 6.309 13.825 9.236 8 13 2.175 9.236 6.336 6.31 8 7.982Z"/>
				  <path d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4h-8.5Zm0 1H7.5v3h-6l2.25-3ZM8.5 4V1h3.75l2.25 3h-6ZM15 5v10H1V5h14Z"/>
				</svg>
				　인기 판매자의 최신상품
			</h4>
			<div class="row text-center" style="padding-top: .75rem;"> <!-- border: 5px solid rgb(180,180,180); -->
				<div class="col-3" th:each="item : ${bestSalerItems}">
					<div class="card mb-3" th:onclick="|location.href='@{/item/itemDetail(itemCode=${item.itemCode})}'|"> <!-- style="border: 3px solid rgb(192, 192, 192);" -->
						<div class="image-box" style="height: 250px;">
							<img th:src="|@{/images/}${item.imgList[0].attachedName}|" th:onclick="clickItem(${item.itemCode})" class="card-img-top image-thumbnail upCnt" alt="...">
						</div>
						<div class="card-body" style="background-color: #A4BE7B; color: white;">
							<div><p>[[${item.itemName}]]</p></div>
							<div th:text="${#numbers.formatCurrency(item.itemPrice)}"></div>
						</div>
					</div>
				</div>
				<div th:if="${#lists.isEmpty(bestSalerItems)}" class="col-12">
					<img alt="..." src="http://www.boopoom.com/shop/img/no_item.gif">
				</div>
			</div>
		</div>
		
		<hr>
		
		<div class="container col-12">
			<h4 style="color: green;">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-box-seam" viewBox="0 0 16 16">
				  <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
				</svg>
				　상품 목록
			</h4>
			<div class="row text-center" style="padding-top: .75rem;"> <!-- border: 5px solid rgb(195,195,195); -->
				<div class="col-3" th:each="item : ${itemList}">
					<div class="card mb-3" th:onclick="|location.href='@{/item/itemDetail(itemCode=${item.itemCode})}'|"> <!--  style="border: 3px solid rgb(192, 192, 192);" -->
						<div class="image-box" style="height: 250px;">
							<img th:src="|@{/images/}${item.imgList[0].attachedName}|" th:onclick="clickItem(${item.itemCode})" class="card-img-top image-thumbnail upCnt" alt="...">
						</div>
						<div class="card-body" style="background-color: #A4BE7B; color: white;">
							<div><p>[[${item.itemName}]]</p></div>
							<div th:text="${#numbers.formatCurrency(item.itemPrice)}"></div>
						</div>
					</div>
				</div>
				<div th:if="${#lists.isEmpty(itemList)}" class="col-12">
					<img alt="..." src="http://www.boopoom.com/shop/img/no_item.gif">
				</div>
			</div>
		</div>
		<div class="text-center" th:if="${!#lists.isEmpty(itemList)}">
			<th:block th:if="${itemVO.prev}">
		   		<a th:href="@{/item/list(nowPage=${itemVO.beginPage}-1)}">&lt;</a>
		   	</th:block>
		   	
		   	<th:block th:each="pageNum : ${#numbers.sequence(itemVO.beginPage, itemVO.endPage)}">
		   		<a th:text="${pageNum}" th:href="@{/item/list(nowPage=${pageNum})}"></a> 	
		   	</th:block>
		   	
		   	<th:block th:if="${itemVO.next}">
		   		<a th:href="@{/item/list(nowPage=${itemVO.endPage}+1)}">&gt;</a>
		   	</th:block>
		</div>

		<!--제이쿼리 태그 추가 -->	
		<script src="https://code.jquery.com/jquery-latest.min.js"></script>	
		<!--차트 생성을 위한 태그 추가 -->	
		<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
		<script type="text/javascript" th:src="@{/js/shop_main.js}"></script>
	</div>
</html>